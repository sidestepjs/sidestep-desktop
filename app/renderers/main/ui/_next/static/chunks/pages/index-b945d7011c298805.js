(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3214)}])},3214:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var r={};t.r(r),t.d(r,{analytics:function(){return Z},authentication:function(){return y},db:function(){return L},e2ee:function(){return k},http:function(){return P},language:function(){return j},notifications:function(){return G},useStore:function(){return N},xhook:function(){return R}});var o=t(7568),i=t(1799),u=t(9396),s=t(9534),a=t(655),c=t(5893),l=t(7297),d=t(874);function f(){var e=(0,l.Z)(["\n  text-3xl \n  font-bold \n  bg-transparent \n  p-4 \n  mb-[50px]\n  border-[3px] \n  border-t-green-400 \n  border-r-blue-400 \n  border-b-yellow-400\n  rounded-[10px]\n\n  a {\n    text-yellow-400\n  }\n"]);return f=function(){return e},e}var h,p,g,v,w,m=d.Z.div(f()),_=t(542),b="UA-191014557-1",Z={GA_ID:b,InitGA:function(){console.log({IS_BROWSER:!0,GAInitialized:window.GA_INITIALIZED}),!window.GA_INITIALIZED&&b&&(console.log("Initializing Google Analytics for ID",b),_.ZP.initialize(b))},PageView:function(){console.log("Loading PageView on GA -> ",window.location.pathname),_.ZP.set({page:window.location.pathname+window.location.search}),_.ZP.pageview(window.location.pathname+window.location.search)},Event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e&&n&&_.ZP.event({category:e,action:n,label:t})}},y=function(){},x=(h=(0,o.Z)(function(e,n){return(0,a.__generator)(this,function(n){return[2,e]})}),function(e,n){return h.apply(this,arguments)}),A=(p=(0,o.Z)(function(e){return(0,a.__generator)(this,function(e){return[2,decrypted=""]})}),function(e){return p.apply(this,arguments)}),I=(g=(0,o.Z)(function(){return(0,a.__generator)(this,function(e){return[2]})}),function(){return g.apply(this,arguments)}),k={encrypt:x,decrypt:A,generate:I},S=t(797),E=t(196),P=(v=(0,o.Z)(function(e){var n,t,r,o,i,u,s,c,l,d,f,h,p,g,v,w,m;return(0,a.__generator)(this,function(u){switch(u.label){case 0:n=e.headers,t=e.interceptor,r=e.method,i=void 0===(o=e.payload)?null:o,e.timeout,s=e.url,l=[200,201,204],u.label=1;case 1:return u.trys.push([1,3,,4]),f={url:s,headers:n,data:i,method:r,withCredentials:!0},t&&(d=t).fn.apply(d,[E.Z].concat((0,S.Z)(t.args))),[4,(0,E.Z)(f)];case 2:if(h=(c=u.sent()).status,p=c.statusText,g=c.data,f.headers=c.headers,l.includes(h))return[2,{success:!0,status:h,message:p,data:{request:f,response:g}}];return[2,{success:!1,status:h,message:p,data:{request:f}}];case 3:return w=(v=u.sent()).response,m=v.message,[2,{success:!1,status:w.status,message:m,data:{request:{method:r,url:s,data:i,headers:n},response:w.data}}];case 4:return[2]}})}),function(e){return v.apply(this,arguments)}),j={en:JSON.parse('{"Gobel":"en-Gobel","Smokes":"en-Smokes","hello":"Hi"}'),fr:JSON.parse('{"Gobel":"fr-Gobel","Smokes":"fr-Smokes","hello":"Bonjour"}')},G=function(){},N=(0,t(6902).ZP)(function(e){return{votes:5}}),D=t(9520),z=t(6178);window.indexedDB||(D.default.dependencies.indexedDB=z.ZP);var L=new D.default("sidestep_db");L.version(1).stores({friends:"++id, name, age"});var O,T,R=t(7321),B=t(7294),C=t(1163);(0,o.Z)(function(e){var n,t,r,o,i,u,s,c,l,d;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,fetch("/api/authorize")];case 1:return[4,n.sent().json()];case 2:return r=(t=n.sent()).rbac,i=!1,u=(null==(o=t.currentUser)?void 0:o.role)||null,s=null==r?void 0:r[u],c="superAdmin"===u,l=null==s?void 0:s.find(function(n){return n.page===e}),c&&(i=!0),!c&&l&&(i=!0),c||l||(i=!1),d={restrictedPageURL:e,userRole:u,isSuperAdmin:c,isAuthorized:i},[2,{isAuthorized:i,userProfile:d}]}})});var J,M=(T=(0,o.Z)(function(e,n){var t,r,o,i,u,s,c,l,d;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,fetch("/api/authorize")];case 1:return[4,t.sent().json()];case 2:return i=(o=t.sent()).rbac,[2,{isAuthorized:"superAdmin"===(s=(null==(u=o.currentUser)?void 0:u.role)||null)||!!("*"===(l=i[s].find(function(n){return n.page===e}).permissions)[0]&&1===l.length)||(null==l?void 0:l.includes(n))}]}})}),function(e,n){return T.apply(this,arguments)});(0,o.Z)(function(e,n){return(0,a.__generator)(this,function(t){return[2,M(e,n)]})});var U,q=t(1039),V=(0,C.withRouter)(function(e){var n=e.children;return(0,s.Z)(e,["children"]),(0,c.jsx)("button",(0,u.Z)((0,i.Z)({},e),{children:n}))}),X=function(e){console.log({props:e});var n=e.db,t=e.useStore;e.router;var r=(0,B.useState)(!1),i=r[0],u=r[1],s=t(function(e){return e.votes}),l=(0,q.useLiveQuery)(function(){var e;return null==n?void 0:null===(e=n.friends)||void 0===e?void 0:e.toArray()}),d=(0,B.useState)(null),f=d[0],h=d[1];(0,B.useEffect)(function(){var e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){var n=e.matches;console.log({darkModeIsEnabled:n})});return u(e),function(){removeEventListener("change",n)}},[]),(0,B.useEffect)(function(){var e;(e=(0,o.Z)(function(e){var n;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,e.friends.add({name:"Johana Mburu",age:"34"})];case 1:return n=t.sent(),console.log("added friend with id: ".concat(n)),[2]}})}),function(n){return e.apply(this,arguments)})(n)},[n]);var p=function(){null==l||l.map(function(e){var t=e.id;n.friends.delete(t)}),h(localStorage.getItem("port"))};return(0,c.jsxs)("div",{className:"flex-column items-center justify-center w-full h-full",children:[(0,c.jsx)(m,{children:(0,c.jsxs)("a",{children:["smokes, votes:",s]})}),(0,c.jsxs)("p",{children:["Dark mode enabled: ",i?"true":"false"]}),(0,c.jsxs)("p",{children:["API port is: ",f,", buildTarget: ","DESKTOP"]}),(0,c.jsxs)("p",{children:[" friends:",JSON.stringify(l)]}),(0,c.jsx)(V,{onClick:p,style:{background:"red"},children:"Delete"})]})},H=(0,C.withRouter)(function(e){return(0,c.jsx)(X,(0,i.Z)({},e,r))})}},function(e){e.O(0,[481,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);